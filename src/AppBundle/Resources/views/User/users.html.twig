{%extends "AppBundle:Layouts:layoutprofiles.html.twig"%}
{% block javascripts %}
    {{ parent() }}
     <script src="{{ asset('assets/js/custom/users.js') }}"></script>
{% endblock %}
{% block content %}
    <section class="people-section">
        <div class="row">
            <div class="container">
                <div class="col-lg-12 box-form">
                    <h1>Usuarios registrados</h1>
                    <div class="count">
                        <span class="label label-primary">
                            Total de personas: {{ pagination.getTotalItemCount }}
                        </span>
                    </div>

                    <hr />

                    {% for user in pagination %}
                        <div class="media">
                            <div class="media-left">
                                {#mostramos los datos del usuario#}
                                {% if user.image == null%}
                                    <a href="{{ path('user_profile', {'id':user.id})}}">
                                        <img class="company-pp-list" src="{{asset('assets/images/default.jpg')}}" />
                                    </a>
                                {% else %}
                                    <a href="{{ path('user_profile', {'id':user.id})}}">
                                       <img class="company-pp-list" src="{{asset('uploads/users/'~user.image)}}" /> 
                                    </a>
                                {%endif%}
                            </div>
                            
                            <div class="media-body">
                                <h4 class="media-heading"><a href="{{ path('user_profile', {'id':user.id})}}">{{user.name}} {{user.plastname}}</a></h4>
                                <p>{{user.biography}}</p>
                                
                                {% if app.user.id != user.id%}
                                    <div class="pull-right buttons-following" >
                                        <button class="btn btn-sm btn-success btn-follow {% if app.user|following(user) == true%} hidden {% endif %}" data-followed="{{ user.id }}">
                                            <span class="glyphicon glyphicon-ok-circle" aria-hidden="true"></span>
                                            Seguir
                                        </button>

                                        <button class="btn btn-sm btn-default btn-unfollow {% if app.user|following(user) == false %} hidden {% endif %}" data-followed="{{ user.id }}">
                                            <span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
                                            Dejar de seguir
                                        </button>
                                    </div>
                                {% endif %}
                            </div>

                            

                            <div class="clearfix"></div>
                            <hr>
                        </div>
                    {% endfor%}
            

                    <div class="navigation">
                        {{ knp_pagination_render(pagination) }}
                    </div>
                    <div class="clearfix"></div>
                </div>
            </div>
        </div>

    </section>
    
    

{%endblock%}