{%extends "AppBundle:Layouts:layoutprofiles.html.twig"%}
{% block javascripts %}
    {{ parent() }}
     <script src="{{ asset('assets/js/custom/users.js') }}"></script>
{% endblock %}
{% block content %}
    
    <div class="container">
        <div class="col-lg-12 box-form">
            {% if type == 'following'%}
                <h1 class="box-header">Personas a las que sigues, {{ profile_user.name }}</h1>
            {% else %}
                <h1 class="box-header">Seguidores de {{ profile_user.name }}</h1>
            {% endif %}
            <div class="count">
                <span class="label label-primary">
                    Total de personas: {{ pagination.getTotalItemCount }}
                </span>
            </div>
                
            <hr />
            
            <div class="box-content box-users">
                {% for follow in pagination %}
                    
                {% if type == 'following'%}
                    {% set user = follow.followed %}
                {% else %}
                    {% set user = follow.user %}
                {% endif %}
                <div class="media">
                    <div class="media-left">
                        {#mostramos los datos del usuario#}
                        {% if user.image == null%}
                            <a href="">
                                <img class="company-pp-list" src="{{asset('assets/images/default.jpg')}}" />
                            </a>
                        {% else %}
                            <a href="">
                               <img class="company-pp-list" src="{{asset('uploads/users/'~user.image)}}" /> 
                            </a>
                        {%endif%}
                    </div>

                    <div class="media-body">
                        <h4 class="media-heading">{{user.name}} {{user.plastname}}</h4>
                        <p>{{user.biography}}</p>

                        {% if app.user.id != user.id%}
                            <div class="pull-right buttons-following" >
                                <button class="btn btn-sm btn-success btn-follow {% if app.user|following(user) == true%} hidden {% endif %}" data-followed="{{ user.id }}">
                                    <span class="glyphicon glyphicon-ok-circle" aria-hidden="true"></span>
                                    Seguir
                                </button>

                                <button class="btn btn-sm btn-default btn-unfollow {% if app.user|following(user) == false %} hidden {% endif %}" data-followed="{{ user.id }}">
                                    <span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
                                    Dejar de seguir
                                </button>
                            </div>
                        {% endif %}
                    </div>

                    <div class="clearfix"></div>
                    <hr>
                </div>
                {% endfor %}
            </div>
            
            <div class="navigation">
                {{ knp_pagination_render(pagination) }}
            </div>
            <div class="clearfix"></div>
        </div>
    </div>
    

{%endblock%}